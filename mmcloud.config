plugins {
  id 'nf-float'
}

workDir = '/mnt/jfs/nextflow/working'

process {
    executor = 'float'
    errorStrategy = 'retry'

    withName: 'TRANSDECODER_LONGORF' {
        cpus   = { 4 }
        memory = {  12.GB  }
        time   = {  3000.h   }
    }
    withName: 'HMMER_HMMSCAN' {
        cpus   = { 4 }
        memory = {  12.GB  }
        time   = {  3000.h   }
    }
    withName: 'TRANSDECODER_PREDICT' {
        cpus   = { 4 }
        memory = {  12.GB  }
        time   = {  300.h   }
    }   

}

podman.registry = 'quay.io'

float {
    address = ''
    username = ''
    password = ''
    timefactor      = 10
    commonExtra ='  --dataVolume [opts=" --cache-dir /mnt/jfs_cache "]jfs://54.226.146.211/1:/mnt/jfs --dataVolume [size=120]:/mnt/jfs_cache --customTag rnaseq:jfs-OD-nov-15 --dumpMode incremental --vmPolicy [spotFirst=true,retryLimit=10,retryInterval=300s]'
    
}

// AWS access info if needed
aws {
  client {
    maxConnections = 20
    connectionTimeout = 300000
  }
  accessKey = ''
  secretKey = ''
}

tower {
    accessToken = ''
}

